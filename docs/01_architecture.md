# Adamant アーキテクチャ解説

## ゲームループ型アーキテクチャ

Adamant は従来の MVC モデルではなく、**ゲームループ型**のアーキテクチャを採用しています。

```
┌─────────────────────────────────────────────────────────────┐
│                       Event Loop                            │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐  │
│  │  Input  │ -> │  Update │ -> │  Render │ -> │ Present │  │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘  │
│       ^                                              │      │
│       └──────────────────────────────────────────────┘      │
└─────────────────────────────────────────────────────────────┘
```

### なぜゲームループ型なのか？

1. **低レイテンシ**: キー入力から画面反映までの遅延を最小化
2. **フレーム単位の制御**: 60fps / 120fps などの固定フレームレート制御が容易
3. **リソース管理**: GPU リソースの効率的な再利用

## ファイル構造

```
adamant/
├── src/
│   ├── main.rs           # エントリーポイント
│   ├── lib.rs            # ライブラリルート
│   ├── app.rs            # アプリケーション状態 & イベントループ
│   └── renderer/
│       ├── mod.rs        # wgpu 初期化 & レンダリング
│       └── pipeline.rs   # シェーダーパイプライン
├── shaders/
│   └── quad.wgsl         # WGSL シェーダー
└── docs/                 # ドキュメント
```

## 依存関係の役割

| クレート | 役割 |
|---------|------|
| `winit` | ウィンドウ作成、イベント処理 |
| `wgpu` | GPU 抽象化 (Vulkan/Metal/DX12) |
| `pollster` | 軽量な async executor |
| `bytemuck` | GPU バッファ用のバイト変換 |

## 次のステップ

- [ ] `02_event_loop.md` を読んでイベントループを理解する
- [ ] `03_wgpu_basics.md` で wgpu の基礎を学ぶ
- [ ] `04_shaders.md` で WGSL シェーダーを書いてみる
